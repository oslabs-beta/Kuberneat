(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{38328:function(e,t,r){Promise.resolve().then(r.bind(r,7130)),Promise.resolve().then(r.bind(r,23416)),Promise.resolve().then(r.t.bind(r,62027,23))},7130:function(e,t,r){"use strict";r.r(t),r.d(t,{Visualizer:function(){return d},default:function(){return h}});var s=r(57437),l=r(2265),i=r(29641),n=r(39660),a=r(6216),c=r(48227),o=r(43337),u=e=>{let{info:t,nodeNum:r}=e,[i,u]=l.useState(null),d=e=>{u(e.currentTarget)},h=()=>{u(null)},x=document.querySelector(".".concat(t.Name));return x.addEventListener("mouseover",function(e){d(e)}),x.addEventListener("mouseout",function(e){h()}),(0,s.jsx)("div",{id:"pod".concat(r),className:"mouse-over-popover",children:(0,s.jsxs)(n.j,{placement:"right",children:[(0,s.jsx)(a.b,{children:(0,s.jsx)(c.A,{children:"Pod info"})}),(0,s.jsx)(o.g,{children:(0,s.jsx)("div",{className:"px-1 py-2",children:(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{id:"popOver",children:["Name: ",t.Name," "]}),(0,s.jsxs)("li",{id:"popOver",children:["CPU Requests: ",t.CPU_Requests," "]}),(0,s.jsxs)("li",{id:"popOver",children:["CPU Limits: ",t.CPU_Limits," "]}),(0,s.jsxs)("li",{id:"popOver",children:["Memory Requests: ",t.Memory_Requests]}),(0,s.jsxs)("li",{id:"popOver",children:["Memory Limits: ",t.Memory_Limits]}),(0,s.jsxs)("li",{id:"popOver",children:["Age: ",t.Age]})]})})})]})})};let d=()=>{let[e,t]=(0,l.useState)([]),r=(0,l.useRef)(null);(0,l.useEffect)(()=>{fetch("/cluster",{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{for(let r=0;r<e.Name.length;r++)t(t=>[...t,{Namespace:e.Namespace[r],Name:e.Name[r],CPU_Requests:e.CPU_Requests[r],CPU_Limits:e.CPU_Limits[r],Memory_Requests:e.Memory_Requests[r],Memory_Limits:e.Memory_Limits[r],Age:e.Age[r]}])}).catch(e=>console.log("Fetch Error: ",e))},[]);let n={nodes:[{id:"cluster",group:1}],links:[]},a=[],c={};for(let t=0;t<e.length;t++)a.includes(e[t].Namespace)||a.push(e[t].Namespace);for(let e=0;e<a.length;e++)n.nodes.push({id:"".concat(a[e]),group:e+2}),c[a[e]]=e+2,n.links.push({source:"".concat(a[e]),target:"cluster",value:24});for(let t=0;t<e.length;t++)n.nodes.push({id:"".concat(e[t].Name),group:c[e[t].Namespace]}),n.links.push({source:"".concat(e[t].Name),target:e[t].Namespace,value:24});let o=function(e){let{nodes:t,links:r}=e,{nodeId:s=e=>e.id,nodeGroup:l,nodeGroups:n,nodeFill:a="currentColor",nodeStroke:c="#fff",nodeStrokeWidth:o=1.5,nodeStrokeOpacity:u=5,nodeRadius:d=12,nodeStrength:h,linkSource:x=e=>{let{source:t}=e;return t},linkTarget:f=e=>{let{target:t}=e;return t},linkStroke:p="#999",linkStrokeOpacity:m=.6,linkStrokeWidth:j=1.5,linkStrokeLinecap:g="round",linkStrength:b,colors:v=i.K2I,width:y=640,height:w=400,invalidation:N}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=i.UID(t,s).map(S),_=i.UID(r,x).map(S),C=i.UID(r,f).map(S),P=null==l?null:i.UID(t,l).map(S),U="function"!=typeof j?null:i.UID(r,j),I="function"!=typeof p?null:i.UID(r,p);t=i.UID(t,(e,t)=>({id:k[t]})),r=i.UID(r,(e,t)=>({source:_[t],target:C[t]})),P&&void 0===n&&(n=i.DYV(P));let A=null==l?null:i.PKp(n,v),D=i.q5i(),M=i.Fsl(r).id(e=>{let{index:t}=e;return k[t]});void 0!==h&&D.strength(h),void 0!==b&&M.strength(b);let q=i.A4v(t).force("link",M).force("charge",D).force("center",i.wqt()).on("tick",function(){O.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),L.attr("cx",e=>e.x).attr("cy",e=>e.y),R.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})}),H=i.Ue8("svg").attr("id","D3Graph").attr("width",y).attr("height",w).attr("viewBox",[-y/2,-w/2,y,w]).attr("style","max-width: 200%").attr("style","max-width: 200%; height: auto;"),O=H.append("g").attr("stroke","function"!=typeof p?p:null).attr("stroke-opacity",m).attr("stroke-width","function"!=typeof j?j:null).attr("stroke-linecap",g).selectAll("line").data(r).join("line"),L=H.append("g").attr("fill",a).attr("stroke",c).attr("stroke-opacity",u).attr("stroke-width",o).selectAll("circle").data(t).join("circle").attr("r",d).call(i.ohM().on("start",function(e){e.active||q.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y}).on("drag",function(e){e.subject.fx=e.x,e.subject.fy=e.y}).on("end",function(e){e.active||q.alphaTarget(0),e.subject.fx=null,e.subject.fy=null})),R=H.selectAll("text.label").data(t).enter().append("text").attr("class",function(e){return e.id}).attr("fill","black").attr("x",-20).attr("y",30).attr("font-size","15px").attr("color","#ffffff").text(function(e){return e.id});function S(e){return null!==e&&"object"==typeof e?e.valueOf():e}return U&&O.attr("stroke-width",e=>{let{index:t}=e;return U[t]}),I&&O.attr("stroke",e=>{let{index:t}=e;return I[t]}),P&&L.attr("fill",e=>{let{index:t}=e;return A(P[t])}),null!=N&&N.then(()=>q.stop()),Object.assign(H.node(),{scales:{color:A}})}(n,{nodeId:e=>e.id,nodeGroup:e=>e.group,linkStrokeWidth:e=>Math.sqrt(e.value),linkStrength:.1,width:900,height:600});r.current&&r.current.appendChild(o);let d=[];for(let t=0;t<e.length;t++)d.push((0,s.jsx)(u,{info:e[t],nodeNum:t},t));return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{ref:r}),(0,s.jsx)("div",{children:d})]})};var h=d},23416:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var s=r(57437),l=r(2265),i=r(82749),n=r(34211),a=r(40610),c=r(59672),o=r(48227),u=r(85779),d=r(48793),h=r(24033),x=e=>{let{name:t}=e,r=(0,h.useRouter)();return(0,s.jsxs)(a.F,{children:[(0,s.jsx)(c.S,{children:(0,s.jsx)(o.A,{className:"bg-gradient-to-tr from-purple-500 to-green-500 text-white shadow-lg",radius:"none",children:t})}),(0,s.jsxs)(u.a,{children:[(0,s.jsx)(d.W,{shortcut:"⌘E",onClick:()=>{r.push("http://localhost:3000/api/auth/signout"),(0,i.signOut)()},children:"Sign out"}),(0,s.jsx)(d.W,{shortcut:"⌘S",children:"Settings"}),(0,s.jsx)(d.W,{shortcut:"⌘H",children:"Help"})]})]})},f=r(50305),p=r(87427),m=r(16691),j=r.n(m),g={src:"/_next/static/media/dashboardIcon.41da2d05.svg",height:16,width:16,blurWidth:0,blurHeight:0},b={src:"/_next/static/media/podIcon.af825413.svg",height:16,width:16,blurWidth:0,blurHeight:0},v={src:"/_next/static/media/promicon.4d5fcf0b.svg",height:16,width:16,blurWidth:0,blurHeight:0},y={src:"/_next/static/media/clusterIcon.6b5f3c01.svg",height:16,width:16,blurWidth:0,blurHeight:0};r(25325);var w=r(12025),N=()=>{let e=(0,h.useRouter)();return(0,s.jsx)(n.w,{children:(0,s.jsx)(w.Card,{id:"sidebar",className:"h-[calc(100vh-2rem)] !right-0 w-full max-w-[20rem] p-4 shadow-xl shadow-blue-gray-900",style:{position:"fixed",right:0,width:"20rem"},children:(0,s.jsxs)("div",{className:"mb-2 p-4 !text-black text-5xl",children:[(0,s.jsx)(w.Typography,{variant:"h5",color:"blue-gray",children:"⚡ Menu ⚡"}),(0,s.jsxs)(f.d,{children:[(0,s.jsx)(p.G,{value:"dashboards","aria-label":"more-Dashboard",subtitle:(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"More"})," Dashboard Options"]}),title:"Visuals",children:(0,s.jsxs)("div",{className:"flex flex-col justify-between p-2",children:[(0,s.jsxs)(o.A,{className:"p-4 m-4 bg-blue-500",children:[(0,s.jsx)(j(),{src:g,alt:"dashboard-icon"}),(0,s.jsx)("a",{href:"/Home",children:"Graphana UI"})]}),(0,s.jsxs)(o.A,{className:"p-4 m-4 bg-blue-500",onClick:()=>e.push("Home/Cluster-Web-View/"),children:[(0,s.jsx)(j(),{src:y,alt:"cluster-icon"}),(0,s.jsx)("a",{children:"Cluster web view"})]}),(0,s.jsxs)(o.A,{className:"p-4 m-4 bg-blue-500",children:[(0,s.jsx)(j(),{src:b,alt:"pod-icon"}),(0,s.jsx)("a",{href:"/Pod-View",children:"Pod view"})]})]})}),(0,s.jsx)(p.G,{value:"promethus","aria-label":"promethus",subtitle:(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Query"})," with PromQL"]}),title:"Prometheus",children:(0,s.jsx)("div",{className:"flex flex-col justify-between p-2",children:(0,s.jsxs)(o.A,{className:"p-4 m-4 bg-blue-500",children:[(0,s.jsx)(j(),{src:v,alt:"prom-icon"}),(0,s.jsx)("a",{href:"/Pod-View",children:"Prometheus UI"})]})})}),(0,s.jsx)(p.G,{value:"heath","aria-label":"health",subtitle:(0,s.jsxs)("span",{children:["Montior the ",(0,s.jsx)("strong",{children:"health"})," of current running pods"]}),title:"Health",children:(0,s.jsx)("div",{className:"flex flex-col justify-between p-2",children:(0,s.jsx)(o.A,{className:"p-4 m-4 bg-blue-500",onClick:()=>e.push("Home/Health/"),children:(0,s.jsx)("a",{href:"/Pod-View",children:" \uD83D\uDC99 "})})})})]})]})})})},k={src:"/_next/static/media/menuIcon.c22e6440.svg",height:25,width:25,blurWidth:0,blurHeight:0};r(64323);var _=()=>{var e;let{data:t}=(0,i.useSession)(),[r,a]=(0,l.useState)(!1),c=(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.name)||"";return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("header",{className:"flex justify-between p-4 !bg-black shadow-lg",children:[(0,s.jsx)("div",{id:"user",className:"flex start-1",children:(0,s.jsx)(n.w,{children:(0,s.jsx)(x,{name:c})})}),(0,s.jsx)("div",{id:"zeus",className:"flex-grow",children:(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Zeus"})}),(0,s.jsx)("div",{id:"menu-button",children:(0,s.jsxs)("button",{className:"fixed top-5 right-10  flex flex-row-reverse items-center text-white text-xl",onClick:()=>{a(!r)},children:[r&&(0,s.jsx)("div",{className:"flex flex-col !right-0",children:(0,s.jsx)(N,{})}),(0,s.jsx)(j(),{src:k,alt:"menu-icon"})]})})]})})}},64323:function(){},25325:function(){},62027:function(){}},function(e){e.O(0,[590,749,639,758,339,641,971,472,744],function(){return e(e.s=38328)}),_N_E=e.O()}]);